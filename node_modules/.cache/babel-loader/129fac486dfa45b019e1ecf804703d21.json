{"ast":null,"code":"const morx = require('morx');\n\nconst q = require('q');\n\nconst spec = morx.spec().build('id', 'required:true, eg:BIL136').build('amount', 'required:true, eg:3000.50').build('reference', 'required:true, eg:BPUSSD1588268275502326').build('country', 'required:false, eg:NG').build('customer', 'required:true, eg:{ \"name\": \"emmanuel\", \"email\": \"emmanuel@x.com\", \"phone_number\": \"08060811638\"}').build('fields', 'required:true, eg:[{\"id\": \"42107711:42107712\",\"quantity\": \"1\",\"value\": \"3500\"}, { \"id\": \"42107710\", \"quantity\": \"1\", \"value\": \"t@x.com\" }]').build('product_id', 'required:true, eg:OT151').end();\n\nfunction service(data, _rave) {\n  var d = q.defer();\n  q.fcall(() => {\n    var validated = morx.validate(data, spec, _rave.MORX_DEFAULT, {\n      throw_error: true\n    });\n    var params = validated.params;\n    return params;\n  }).then(params => {\n    params.method = \"POST\";\n    return _rave.request(`v3/billers/${params.id}/products/${params.product_id}/orders`, params);\n  }).then(resp => {\n    d.resolve(resp.body);\n  }).catch(err => {\n    d.reject(err);\n  });\n  return d.promise;\n}\n\nservice.morxspc = spec;\nmodule.exports = service;","map":{"version":3,"sources":["C:/Users/Obed/PycharmProjects/akmarv_project/node_modules/flutterwave-node-v3/services/bills/rave.create-order-billing-code.js"],"names":["morx","require","q","spec","build","end","service","data","_rave","d","defer","fcall","validated","validate","MORX_DEFAULT","throw_error","params","then","method","request","id","product_id","resp","resolve","body","catch","err","reject","promise","morxspc","module","exports"],"mappings":"AAAA,MAAMA,IAAI,GAAGC,OAAO,CAAC,MAAD,CAApB;;AACA,MAAMC,CAAC,GAAGD,OAAO,CAAC,GAAD,CAAjB;;AAGA,MAAME,IAAI,GAAGH,IAAI,CAACG,IAAL,GACXC,KADW,CACL,IADK,EACC,0BADD,EAEXA,KAFW,CAEL,QAFK,EAEK,2BAFL,EAGXA,KAHW,CAGL,WAHK,EAGQ,0CAHR,EAIXA,KAJW,CAIL,SAJK,EAIM,uBAJN,EAKXA,KALW,CAKL,UALK,EAKO,mGALP,EAMXA,KANW,CAML,QANK,EAMK,4IANL,EAOXA,KAPW,CAOL,YAPK,EAOS,yBAPT,EAQXC,GARW,EAAb;;AAYA,SAASC,OAAT,CAAiBC,IAAjB,EAAuBC,KAAvB,EAA8B;AAE7B,MAAIC,CAAC,GAAGP,CAAC,CAACQ,KAAF,EAAR;AACAR,EAAAA,CAAC,CAACS,KAAF,CAAQ,MAAM;AAEZ,QAAIC,SAAS,GAAGZ,IAAI,CAACa,QAAL,CAAcN,IAAd,EAAoBJ,IAApB,EAA0BK,KAAK,CAACM,YAAhC,EAA+C;AAACC,MAAAA,WAAW,EAAC;AAAb,KAA/C,CAAhB;AACA,QAAIC,MAAM,GAAGJ,SAAS,CAACI,MAAvB;AAEA,WAAQA,MAAR;AAEA,GAPF,EAQEC,IARF,CAQOD,MAAM,IAAI;AAGfA,IAAAA,MAAM,CAACE,MAAP,GAAgB,MAAhB;AACA,WAAOV,KAAK,CAACW,OAAN,CAAe,cAAaH,MAAM,CAACI,EAAG,aAAYJ,MAAM,CAACK,UAAW,SAApE,EAA8EL,MAA9E,CAAP;AACA,GAbF,EAcEC,IAdF,CAcOK,IAAI,IAAI;AAEbb,IAAAA,CAAC,CAACc,OAAF,CAAUD,IAAI,CAACE,IAAf;AAEA,GAlBF,EAmBEC,KAnBF,CAmBQC,GAAG,IAAI;AAEbjB,IAAAA,CAAC,CAACkB,MAAF,CAASD,GAAT;AAEA,GAvBF;AAyBA,SAAOjB,CAAC,CAACmB,OAAT;AAEA;;AACDtB,OAAO,CAACuB,OAAR,GAAkB1B,IAAlB;AACA2B,MAAM,CAACC,OAAP,GAAiBzB,OAAjB","sourcesContent":["const morx = require('morx');\nconst q = require('q');\n\n\nconst spec = morx.spec()\n\t.build('id', 'required:true, eg:BIL136')\n\t.build('amount', 'required:true, eg:3000.50')\n\t.build('reference', 'required:true, eg:BPUSSD1588268275502326')\n\t.build('country', 'required:false, eg:NG')\n\t.build('customer', 'required:true, eg:{ \"name\": \"emmanuel\", \"email\": \"emmanuel@x.com\", \"phone_number\": \"08060811638\"}')\n\t.build('fields', 'required:true, eg:[{\"id\": \"42107711:42107712\",\"quantity\": \"1\",\"value\": \"3500\"}, { \"id\": \"42107710\", \"quantity\": \"1\", \"value\": \"t@x.com\" }]')\n\t.build('product_id', 'required:true, eg:OT151')\n\t.end();\n\n\n\nfunction service(data, _rave) {\n\n\tvar d = q.defer();\n\tq.fcall(() => {\n\n\t\t\tvar validated = morx.validate(data, spec, _rave.MORX_DEFAULT,  {throw_error:true});\n\t\t\tvar params = validated.params;\n\n\t\t\treturn (params);\n\n\t\t})\n\t\t.then(params => {\n\n\n\t\t\tparams.method = \"POST\"\n\t\t\treturn _rave.request(`v3/billers/${params.id}/products/${params.product_id}/orders`, params)\n\t\t})\n\t\t.then(resp => {\n\n\t\t\td.resolve(resp.body);\n\n\t\t})\n\t\t.catch(err => {\n\n\t\t\td.reject(err);\n\n\t\t});\n\n\treturn d.promise;\n\n}\nservice.morxspc = spec;\nmodule.exports = service;"]},"metadata":{},"sourceType":"script"}