{"ast":null,"code":"const morx = require('morx');\n\nconst q = require('q');\n\nconst spec = morx.spec().build('title', 'required:false, eg:akhlm blk tknzd chrg pstmn tst 1').build('retry_strategy', 'required:false, eg:{\"retry_interval\": 120, \"retry_amount_variable\": 60,\"retry_attempt_variable\": 2}').build('bulk_data', 'required:true, eg:\"bulk_data\": [{\"currency\": \"NGN\",\"token\": \"flw-t1nf-f9b3bf384cd30d6fca42b6df9d27bd2f-m03k\",\"country\": \"NG\",\"amount\": 3500,\"email\": \"user@example.com\",\"first_name\": \"Example\", \"last_name\": \"User\", \"ip\": \"pstmn\",\"tx_ref\": \"akhlm-pstmn-blkchrg-xy10\" },{ \"currency\": \"NGN\",\"token\": \"flw-t1nf-f9b3bf384cd30d6fca42b6df9d27bd2f-m03k\",\"country\": \"NG\", \"amount\": 3000, \"email\": \"user@example.com\",\"first_name\": \"Jane\", \"last_name\": \"Doe\", \"ip\": \"pstmn\",\"tx_ref\": \"akhlm-pstmn-blkchrge-xx10 }]').build('last_name', 'required:false, eg:garuba').build('first_name', 'required:false, eg:garuba').end();\n\nfunction service(data, _rave) {\n  var d = q.defer();\n  q.fcall(() => {\n    var validated = morx.validate(data, spec, _rave.MORX_DEFAULT);\n    var params = validated.params;\n    return params;\n  }).then(params => {\n    return _rave.request(`v3/bulk-tokenized-charges`, params);\n  }).then(resp => {\n    d.resolve(resp.body);\n  }).catch(err => {\n    d.reject(err);\n  });\n  return d.promise;\n}\n\nservice.morxspc = spec;\nmodule.exports = service;","map":{"version":3,"sources":["C:/Users/Obed/PycharmProjects/akmarv_project/node_modules/flutterwave-node-v3/services/tokenized-charges/rave.bulk.charge.js"],"names":["morx","require","q","spec","build","end","service","data","_rave","d","defer","fcall","validated","validate","MORX_DEFAULT","params","then","request","resp","resolve","body","catch","err","reject","promise","morxspc","module","exports"],"mappings":"AAAA,MAAMA,IAAI,GAAGC,OAAO,CAAC,MAAD,CAApB;;AACA,MAAMC,CAAC,GAAGD,OAAO,CAAC,GAAD,CAAjB;;AAEA,MAAME,IAAI,GAAGH,IAAI,CAACG,IAAL,GACXC,KADW,CACL,OADK,EACI,qDADJ,EAEXA,KAFW,CAEL,gBAFK,EAEa,qGAFb,EAGXA,KAHW,CAGL,WAHK,EAGQ,ufAHR,EAIXA,KAJW,CAIL,WAJK,EAIQ,2BAJR,EAKXA,KALW,CAKL,YALK,EAKS,2BALT,EAOXC,GAPW,EAAb;;AAUA,SAASC,OAAT,CAAiBC,IAAjB,EAAuBC,KAAvB,EAA8B;AAE7B,MAAIC,CAAC,GAAGP,CAAC,CAACQ,KAAF,EAAR;AACAR,EAAAA,CAAC,CAACS,KAAF,CAAQ,MAAM;AAEZ,QAAIC,SAAS,GAAGZ,IAAI,CAACa,QAAL,CAAcN,IAAd,EAAoBJ,IAApB,EAA0BK,KAAK,CAACM,YAAhC,CAAhB;AACA,QAAIC,MAAM,GAAGH,SAAS,CAACG,MAAvB;AAEA,WAAQA,MAAR;AAEA,GAPF,EAQEC,IARF,CAQOD,MAAM,IAAI;AACf,WAAOP,KAAK,CAACS,OAAN,CAAe,2BAAf,EAA2CF,MAA3C,CAAP;AACA,GAVF,EAWEC,IAXF,CAWOE,IAAI,IAAI;AAEbT,IAAAA,CAAC,CAACU,OAAF,CAAUD,IAAI,CAACE,IAAf;AAEA,GAfF,EAgBEC,KAhBF,CAgBQC,GAAG,IAAI;AAEbb,IAAAA,CAAC,CAACc,MAAF,CAASD,GAAT;AAEA,GApBF;AAsBA,SAAOb,CAAC,CAACe,OAAT;AAEA;;AACDlB,OAAO,CAACmB,OAAR,GAAkBtB,IAAlB;AACAuB,MAAM,CAACC,OAAP,GAAiBrB,OAAjB","sourcesContent":["const morx = require('morx');\nconst q = require('q');\n\nconst spec = morx.spec()\n\t.build('title', 'required:false, eg:akhlm blk tknzd chrg pstmn tst 1')\n\t.build('retry_strategy', 'required:false, eg:{\"retry_interval\": 120, \"retry_amount_variable\": 60,\"retry_attempt_variable\": 2}')\n\t.build('bulk_data', 'required:true, eg:\"bulk_data\": [{\"currency\": \"NGN\",\"token\": \"flw-t1nf-f9b3bf384cd30d6fca42b6df9d27bd2f-m03k\",\"country\": \"NG\",\"amount\": 3500,\"email\": \"user@example.com\",\"first_name\": \"Example\", \"last_name\": \"User\", \"ip\": \"pstmn\",\"tx_ref\": \"akhlm-pstmn-blkchrg-xy10\" },{ \"currency\": \"NGN\",\"token\": \"flw-t1nf-f9b3bf384cd30d6fca42b6df9d27bd2f-m03k\",\"country\": \"NG\", \"amount\": 3000, \"email\": \"user@example.com\",\"first_name\": \"Jane\", \"last_name\": \"Doe\", \"ip\": \"pstmn\",\"tx_ref\": \"akhlm-pstmn-blkchrge-xx10 }]')\n\t.build('last_name', 'required:false, eg:garuba')\n\t.build('first_name', 'required:false, eg:garuba')\n\n\t.end();\n\n\nfunction service(data, _rave) {\n\n\tvar d = q.defer();\n\tq.fcall(() => {\n\n\t\t\tvar validated = morx.validate(data, spec, _rave.MORX_DEFAULT);\n\t\t\tvar params = validated.params;\n\n\t\t\treturn (params);\n\n\t\t})\n\t\t.then(params => {\n\t\t\treturn _rave.request(`v3/bulk-tokenized-charges`, params)\n\t\t})\n\t\t.then(resp => {\n\n\t\t\td.resolve(resp.body);\n\n\t\t})\n\t\t.catch(err => {\n\n\t\t\td.reject(err);\n\n\t\t});\n\n\treturn d.promise;\n\n}\nservice.morxspc = spec;\nmodule.exports = service;"]},"metadata":{},"sourceType":"script"}